# In-Out Parameters

함수의 파라미터는 기본적으로 상수입니다. 함수 파라미터의 값을 함수 본문내에서 변경하려고 하면 컴파일 오류가 발생합니다. 이것은 실수로라도 파라미터의 값을 변경할 수 없음을 의미합니다. 함수가 매개변수의 값을 수정하고 호출이 끝난 후에도 변경사항이 유지되도록 하려면 함수의 매개변수를 inout 매개변수로 정의할 수 있습니다.

<br>

- 변수만 inout 파라미터의 인수로 전달될 수 있습니다.
- 상수와 리터럴은 수정할 수 없기 때문에 인수로 전달될 수 없습니다.
- 앰퍼센드(&)를 인수로 inout 매개변수로 전달할 때 변수 이름앞에 &를 붙여 함수에 의해 수정할 수 잇음을 나타내야 합니다.
    
    `swapTwoInts(&someInt, &anotherInt)`
    
- inout 파라미터는 기본값을 가질 수 없습니다.

<br>

## inout parameter의 컴파일러 최적화 동작

### inout 매개변수가 전달되는 과정

1. 함수가 호출되면 argument 값이 복사된다.
2. 함수 내에서 복사본이 수정된다.
3. 함수가 반환되면 복사본의 값이 원래 인수에 할당된다.

이 동작을 copy-in copy-out, call by value result라고 합니다.

<br>

최적화를 위해서 argument가 물리적 주소에 저장된 값인 경우 함수 내부와 외부에서 동일한 메모리 위치를 사용합니다. 최적화된 동작은 참조에 의한 호출로 알려져 있습니다. 복사 오버헤드를 제거하면서 copy-in copy-out, call by value result이 모든 요구사항을 충족합니다.

함수내에서 원래값이 현재 범위에서 사용가능한 경우에는 inout 매개변수로 전달된 값에 엑세스하지 말아야합니다. 원본에 액세스하는 것은 값에 대한 동시 엑세스이므로 Swift의 memory exclusivity gurantee를 위반합니다.
